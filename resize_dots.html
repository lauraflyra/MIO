<!doctype html>

<html lang="en">
<meta charset="utf-8">

<head>
  <script src="/home/lauraflyra/Documents/SHK/ManualInhibitionOnline/resize_dots.js" type="text/javascript"></script>
  <link href="/home/lauraflyra/Documents/SHK/ManualInhibitionOnline/credit_card_styles.css" rel="stylesheet" type="text/css">    
    
</head>

<body>
  <script>


    let dist_screen_cm = 22.5; //in cm // we assume a viewing distance of 20-25 cm 
    let css_pix = 0.016; //approximate size of css pixel in cm

    //In general, the size in dva of the previous objects in pixels is calculated by the general procedure:
    // object_size_cm = object_size_pix * css_pix
    // object_size_dva = cm2dva(object_size_cm, dist_screen_cm) 
    //here instead of using a basic unit of a pixel size in dva and then scaling everything linearly, we decided
    //to always apply the tangent formula.

    let original_visible_dot_pix = 50; 
    let original_invisible_dot_pix = 300;
    let original_visible_dot_cm = original_visible_dot_pix*css_pix;
    let original_invisible_dot_cm = original_invisible_dot_pix*css_pix;

    let original_visible_dot_dva = Math.round(cm2dva(original_visible_dot_cm, dist_screen_cm));
    let original_invisible_dot_dva = Math.round(cm2dva(original_invisible_dot_cm, dist_screen_cm));

    let original_pix_in_dva = cm2dva(css_pix, dist_screen_cm); //how much one pixel (size css_pix in centimeters) is in dva, given the distance to the screen in centimeters
    
    //The serial positions of the dots are centered around zero and have twice the visible dot size in distance between centers

    let original_serial_dva = [];
    let n_serial_dots = 6;
    for (let i=-n_serial_dots/2;i<=n_serial_dots/2; i++){
      if(i!=0){
        original_serial_dva.push(original_visible_dot_dva*i);}
    }

    // In the jump task, the initial displacement was always 200 pix, the second jump was the size of the original visible dot outward or inward. 

    let original_jump_outward_pix = 200;
    let original_jump_outward_cm = original_jump_outward_pix*css_pix;
    let original_jump_outward_dva = Math.round(cm2dva(original_jump_outward_cm, dist_screen_cm));

    let original_jumps_dva = [original_jump_outward_dva+original_visible_dot_dva,original_jump_outward_dva-original_visible_dot_dva,-original_jump_outward_dva+original_visible_dot_dva,-original_jump_outward_dva-original_visible_dot_dva];

  
    console.log("Visible dot in dva", original_visible_dot_dva);
    console.log("Invisible dot in dva", original_invisible_dot_dva);
    //--------------------------------------------------------------------------------------------------------------------------------------------------


  
    //now given that we have the sizes in dva of the original objects, lets see how big they need to be when we change the distance, and 
    //now considering that we have the relation from pixel in centimeters given by the credit card test.

    
    
    //GET THIS DATA FROM THE CALLIBRATION PART OF THE CODE, written in a csv file!
    //how to read from a csv file??
    //given the new viewing distance and pix/cm relation, how do we adjust the object sizes such that they have the same size in dva?  
  





    //NEXT STEPs: 
    //3. Get view_dist_cm, height_card_pix and width_card_pix from the callibration data -- PROBLEM: HOW TO READ THIS? IT'S NOT JUST INTEGRATING EVERYTHING INTO THE SAME HTML FILE!
    //4. After calculating the desired sized, change styles.css and objects.js such that I readjust the stimulus sizes depending on the callibrated viewing distance. 

   

  </script>

</body>
</html>

